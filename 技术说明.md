##  一、解码流程

![](/pic/pic1.png)

![代码](/pic/pic2.png)

## 二、Android C++ 线程简介

*安卓是基于Linux内核的，而Linux是遵循POSIX线程标准的，POSIX线程库中有一系列Pthreads API方便我们对Linux线程的操作。*

*所以我们在Android中使用C/C++线程也就转到了使用POSIX线程库。他们都在头文件“pthread.h”中*

### 1、创建子线程

- ***pthread_t***：用于声明一个线程对象如：***pthread_t thread***;

- ***pthread_creat***:用于创建一个实际的线程如***pthread_create(&pthread,NULL,threadCallBack,NULL)***;其总共接收4个参数，第一
                         个参数为***pthread_t***对象，第二个参数为线程的一些属性我们一般传
                         NULL就行，第三个参数为线程执行的函数（***void* threadCallBack(
                         void *data)***），第四个参数是传递给线程的参数是void*类型的既可
                         以传任意类型。
- ***pthread_exit***:用于退出线程如：***pthread_exit(&thread)***，参数也 可以传NULL。注：线程回调函数最后必须调用此方法，不然APP
                        会退出（挂掉）

### 2、生产者消费者模型
- ***pthread_mutex_t***:用于创建线程锁对象如:***pthread_mutex_t mutex***

- ***pthread_mutex_init***:用于初始化***pthread_mutex_t*** 锁对象如:***pthread_mutex_init(&mutex, NULL)***; 

- ***pthread_mutex_destroy***:用于销毁***pthread_mutex_t***锁对象如:***pthread_mutex_destroy(&mutex)***

- ***pthread_cond_t***:用于创建线程条件对象如:***pthread_cond_t cond***;

- ***pthread_cond_init***:用于初始化***pthread_cond_t***条件对象如:***pthread_cond_init(&cond, NULL)***;

- ***pthread_cond_destroy***:用于销毁***pthread_cond_t***条件对象如:***pthread_cond_destroy(&cond)***;

- ***pthread_mutex_lock***:用于上锁***mutex***,本线程上锁后的其他变量是不能被别的线程操作的如***pthread_mutex_lock(&mutex)***

- ***pthread_mutex_unlock***:用于解锁***mutex***，解锁后的其他变量可以被其他线程操作如：***pthread_mutex_unlock(&mutex)***

- ***pthread_cond_signal***:用于发出条件信号如:***pthread_cond_signal(&mutex, &cond)***;

- ***pthread_cond_wait***;用于线程阻塞等待，直到***pthread_cond_signal***发出条件信号后才执行退出线程阻塞执行后面的操作;









